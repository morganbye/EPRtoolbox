<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of Fsc2Read</title>
  <meta name="keywords" content="Fsc2Read">
  <meta name="description" content="FSC2READ Open Fsc2 files">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">toolbox</a> &gt; <a href="index.html">misc</a> &gt; Fsc2Read.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for toolbox/misc&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>Fsc2Read
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>FSC2READ Open Fsc2 files</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = Fsc2Read(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> FSC2READ Open Fsc2 files

 FSC2READ ()
 FSC2READ ('/path/to/file')
 FSC2READ ('/path/to/file','plot')
 [x, y] = FSC2READ (...)

 FSC2READ when run without any inputs, opens a GUI so that the user can
 open the file themselves. BRUKERREAD can also accept a path to a file as
 an input if the path is put in 'quotes' and the extension (.DTA) is left
 off. BRUKERREAD should also work with Bruker .spc/.par but this is
 untested.

 FSC2READ can be run with the optional 'plot' input, to plot the file
 being loaded

 FSC2READ outputs a x matrix (magnetic field), a y matrix (intensity)
 and an optional info field.

 If no outputs are selected then the x and y values are plotted
 With the graph option (graph is assigned value 1) the data is also
 plotted

 Inputs:
    input1     - a string input to the path of a file
    input2     - 'plot' draws a plot of the imported file

 Outputs:
    output1    - x axis
                   Magnetic field
    output2    - y axis
                   Intensity
    output3    - header
                   Array of information about the loaded file

 Example: 
    [x,y] = Fsc2Read
               GUI load a file

    [x,y] = Fsc2Read('/path/to/file.dat','plot')
               load x and y of file.dat with to the workspace and 
               plot x,y as a new figure

 Other m-files required:   none

 Subfunctions:             none

 MAT-files required:       none


 See also: EPRTOOLBOX CWPLOTTER</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = Fsc2Read(varargin)</a>
0002 
0003 <span class="comment">% FSC2READ Open Fsc2 files</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% FSC2READ ()</span>
0006 <span class="comment">% FSC2READ ('/path/to/file')</span>
0007 <span class="comment">% FSC2READ ('/path/to/file','plot')</span>
0008 <span class="comment">% [x, y] = FSC2READ (...)</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% FSC2READ when run without any inputs, opens a GUI so that the user can</span>
0011 <span class="comment">% open the file themselves. BRUKERREAD can also accept a path to a file as</span>
0012 <span class="comment">% an input if the path is put in 'quotes' and the extension (.DTA) is left</span>
0013 <span class="comment">% off. BRUKERREAD should also work with Bruker .spc/.par but this is</span>
0014 <span class="comment">% untested.</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% FSC2READ can be run with the optional 'plot' input, to plot the file</span>
0017 <span class="comment">% being loaded</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% FSC2READ outputs a x matrix (magnetic field), a y matrix (intensity)</span>
0020 <span class="comment">% and an optional info field.</span>
0021 <span class="comment">%</span>
0022 <span class="comment">% If no outputs are selected then the x and y values are plotted</span>
0023 <span class="comment">% With the graph option (graph is assigned value 1) the data is also</span>
0024 <span class="comment">% plotted</span>
0025 <span class="comment">%</span>
0026 <span class="comment">% Inputs:</span>
0027 <span class="comment">%    input1     - a string input to the path of a file</span>
0028 <span class="comment">%    input2     - 'plot' draws a plot of the imported file</span>
0029 <span class="comment">%</span>
0030 <span class="comment">% Outputs:</span>
0031 <span class="comment">%    output1    - x axis</span>
0032 <span class="comment">%                   Magnetic field</span>
0033 <span class="comment">%    output2    - y axis</span>
0034 <span class="comment">%                   Intensity</span>
0035 <span class="comment">%    output3    - header</span>
0036 <span class="comment">%                   Array of information about the loaded file</span>
0037 <span class="comment">%</span>
0038 <span class="comment">% Example:</span>
0039 <span class="comment">%    [x,y] = Fsc2Read</span>
0040 <span class="comment">%               GUI load a file</span>
0041 <span class="comment">%</span>
0042 <span class="comment">%    [x,y] = Fsc2Read('/path/to/file.dat','plot')</span>
0043 <span class="comment">%               load x and y of file.dat with to the workspace and</span>
0044 <span class="comment">%               plot x,y as a new figure</span>
0045 <span class="comment">%</span>
0046 <span class="comment">% Other m-files required:   none</span>
0047 <span class="comment">%</span>
0048 <span class="comment">% Subfunctions:             none</span>
0049 <span class="comment">%</span>
0050 <span class="comment">% MAT-files required:       none</span>
0051 <span class="comment">%</span>
0052 <span class="comment">%</span>
0053 <span class="comment">% See also: EPRTOOLBOX CWPLOTTER</span>
0054 
0055 
0056 <span class="comment">%                                        _                             _</span>
0057 <span class="comment">%                                       | |                           | |</span>
0058 <span class="comment">%  _ __ ___   ___  _ __ __ _  __ _ _ __ | |__  _   _  ___   _ __   ___| |_</span>
0059 <span class="comment">% | '_ ` _ \ / _ \| '__/ _` |/ _` | '_ \| '_ \| | | |/ _ \ | '_ \ / _ \ __|</span>
0060 <span class="comment">% | | | | | | (_) | | | (_| | (_| | | | | |_) | |_| |  __/_| | | |  __/ |_</span>
0061 <span class="comment">% |_| |_| |_|\___/|_|  \__, |\__,_|_| |_|_.__/ \__, |\___(_)_| |_|\___|\__|</span>
0062 <span class="comment">%                       __/ |                   __/ |</span>
0063 <span class="comment">%                      |___/                   |___/</span>
0064 <span class="comment">%</span>
0065 <span class="comment">%</span>
0066 <span class="comment">% M. Bye v12.1</span>
0067 <span class="comment">%</span>
0068 <span class="comment">% Author:       Morgan Bye</span>
0069 <span class="comment">% Work address: Henry Wellcome Unit for Biological EPR</span>
0070 <span class="comment">%               University of East Anglia</span>
0071 <span class="comment">%               NORWICH, UK</span>
0072 <span class="comment">% Email:        morgan.bye@uea.ac.uk</span>
0073 <span class="comment">% Website:      http://www.morganbye.net/eprtoolbox/brukerread</span>
0074 <span class="comment">% Dec 2011;     Last revision: 12-December-2011</span>
0075 <span class="comment">%</span>
0076 <span class="comment">% Approximate coding time of file:</span>
0077 <span class="comment">%               2 hours</span>
0078 <span class="comment">%</span>
0079 <span class="comment">%</span>
0080 <span class="comment">% Version history:</span>
0081 <span class="comment">% Jan 12        Initial release</span>
0082 <span class="comment">% Dec 11        Initial coding of arguments in/out</span>
0083 
0084 <span class="comment">%                             Inputs</span>
0085 <span class="comment">% ========================================================================</span>
0086 
0087 <span class="keyword">switch</span> nargin
0088     <span class="keyword">case</span> 0
0089         <span class="comment">% GUI get file</span>
0090         [file , directory] = uigetfile({<span class="string">'*.dat'</span>,<span class="string">'fsc2 File (*.*)'</span>; <span class="keyword">...</span>
0091             <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>},<span class="string">'Load fsc2 file'</span>);
0092         
0093         <span class="comment">% if user cancels command nothing happens</span>
0094         <span class="keyword">if</span> isequal(file,0) <span class="comment">%|| isequal(directory,0)</span>
0095             <span class="keyword">return</span>
0096         <span class="keyword">end</span>
0097                 
0098         <span class="comment">% File name/path manipulation</span>
0099         address = [directory,file];
0100         [~, name,extension] = fileparts(address);
0101         
0102         
0103     <span class="keyword">case</span> 1
0104         address = varargin{1};
0105         [directory,name,extension] = fileparts(address);
0106         
0107     <span class="keyword">case</span> 2
0108         address = varargin{1};
0109         [directory,name,extension] = fileparts(address);
0110         graph = varargin{2};
0111 <span class="keyword">end</span>
0112 
0113 <span class="comment">%                            Data files</span>
0114 <span class="comment">% ========================================================================</span>
0115 
0116 fid = fopen(address,<span class="string">'r'</span>);
0117 str = fread(fid, inf,<span class="string">'*char'</span>)';
0118 fclose(fid);
0119 
0120 <span class="comment">% Split file string into lines</span>
0121 Data = textscan(str,<span class="string">'%[^\n\r]'</span>);
0122 
0123 <span class="comment">% Seperate header lines (lines that start with %)</span>
0124 headers = strfind(Data{1},char(<span class="string">'%'</span>));
0125 
0126 headerlines = 0;
0127 <span class="keyword">for</span> k = 1: numel(headers)
0128     <span class="keyword">if</span> isempty(headers{k});
0129         <span class="keyword">break</span>
0130     <span class="keyword">else</span>
0131         headerlines = headerlines+1;
0132         
0133     <span class="keyword">end</span>
0134 <span class="keyword">end</span>
0135 
0136 header = Data{1}(1:headerlines);
0137 header = strvcat(header);
0138 
0139 <span class="comment">% Split data into x and y</span>
0140 data = Data{1}(headerlines+1:end);
0141 
0142 <span class="keyword">for</span> k = 1 : numel(data)
0143     raw_data{k} = textscan(data{k}, <span class="string">'%f %f'</span>);
0144 <span class="keyword">end</span>
0145 
0146 <span class="keyword">for</span> k = 1 : numel(raw_data)
0147     x(k) = raw_data{1,k}{1}(1);
0148     y(k) = raw_data{1,k}{2}(1);
0149 <span class="keyword">end</span>
0150     
0151 x = x';
0152 y = y';
0153 
0154 
0155 <span class="comment">%                              Outputs</span>
0156 <span class="comment">% ========================================================================</span>
0157 
0158 <span class="comment">% Number of outputs arguments</span>
0159 <span class="comment">%</span>
0160 <span class="comment">% Case 0: plot a figure, do nothing else</span>
0161 <span class="comment">%      1: gives the intensities (y-axis)</span>
0162 <span class="comment">%      2: gives x and y</span>
0163 <span class="comment">%      3: gives x, y and comments in header</span>
0164 
0165 <span class="keyword">switch</span> nargout
0166     <span class="keyword">case</span> 0
0167         figure(<span class="string">'name'</span> , [<span class="string">'Fsc2Read: '</span> name], <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>);
0168         plot(x,y);
0169         xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0170         ylabel(<span class="string">'Intensity'</span>);
0171         
0172     <span class="keyword">case</span> 1
0173         varargout{1} = y;
0174         
0175     <span class="keyword">case</span> 2
0176         varargout{1} = x;
0177         varargout{2} = y;
0178         
0179     <span class="keyword">case</span> 3
0180         varargout{1} = x;
0181         varargout{2} = y;
0182         varargout{3} = header;
0183         
0184     <span class="keyword">otherwise</span>
0185         varargout{1} = x;
0186         varargout{2} = y;
0187 <span class="keyword">end</span>
0188 
0189 <span class="comment">% Plot the figure if the input has been selected</span>
0190 <span class="keyword">if</span> nargin == 2
0191     <span class="keyword">if</span> isequal(graph,<span class="string">'plot'</span>)
0192         figure(<span class="string">'name'</span> , [<span class="string">'Fsc2Read: '</span> name], <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>);
0193         plot(x,y);
0194         xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0195         ylabel(<span class="string">'Intensity'</span>);
0196     <span class="keyword">end</span>
0197 <span class="keyword">end</span>
0198 
0199 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 25-Oct-2012 18:03:26 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>