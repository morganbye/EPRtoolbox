<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of cwPlotter</title>
  <meta name="keywords" content="cwPlotter">
  <meta name="description" content="CWPLOTTER Open, analyse and plot power saturation experiments">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">cw</a> &gt; <a href="index.html">cwplotter</a> &gt; cwPlotter.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for cw/cwplotter&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>cwPlotter
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>CWPLOTTER Open, analyse and plot power saturation experiments</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = cwPlotter(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> CWPLOTTER Open, analyse and plot power saturation experiments
      CWPLOTTER, is designed as a complete solution for viewing standard 
      cwEPR experiments, quickly and simply.

      CWPLOTTER, will load Bruker BE3ST files .DTA / .DSC / .YGF (when 
       accessory files (.DSC/.YGF) are in the same folder) and should have functionality
       for older .spc / .par files (untested)

 Syntax:  cwPlotter

 Inputs:
    input1     - n/a

 Outputs:
    output1    - n/a

 Example: 
    see http://morganbye.net/cwPlotter

 Other m-files required:   BrukerRead

 Subfunctions:             none

 MAT-files required:       none


 See also: CWNORM CWPLOT CWZERO ELOADER PEAKFINDER</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../misc/BrukerRead.html" class="code" title="function varargout = BrukerRead(varargin)">BrukerRead</a>	BRUKERREAD Open Bruker BE3ST files (.DTA / .DSC or  .spc / .par) into the</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function cwPlotter_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = cwPlotter_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function mouseCursor_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function panel_multiplot_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function button_clear_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function [handles] = slider_zAxis_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function slider_zAxis_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function reset_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function edit_mWpower_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function edit_mWpower_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function plot_cwplotter(hObject, eventdata, handles,x,y)</a></li><li><a href="#_sub12" class="code">function menu_openfile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function menu_openfolder_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function menu_savefigure_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function menu_exit_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function menuFile_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function menu_figure_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function menu_detachfigure_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function menu_clearfigure_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function ui_load1_ClickedCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function ui_loadmany_ClickedCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function ui_savefig_ClickedCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function edit_filename_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function edit_filename_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function edit_freq_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function edit_freq_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function edit_numofscans_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function edit_numofscans_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function checkbox_zero_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function checkbox_normalize_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function checkbox_Dsmooth_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function checkbox_FFTsmooth_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function edit_FFTsmooth_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function edit_FFTsmooth_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function edit_Dsmooth_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function edit_Dsmooth_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function edit_xoffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function edit_xoffset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function edit_yoffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function edit_yoffset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function checkbox_yoffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function checkbox_xoffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function checkbox_range_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function edit_maglow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function edit_maglow_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function edit_intenlow_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function edit_intenlow_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function edit_maghigh_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function edit_maghigh_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function edit_intenhigh_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function edit_intenhigh_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function edit_g1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function edit_g1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function edit_g2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function edit_g2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function edit_g3_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function edit_g3_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function edit_mag1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function edit_mag1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function edit_coord_mag_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function edit_coord_mag_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function edit_coord_g_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function edit_coord_g_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function figure1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function edit_coord_inten_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function edit_coord_inten_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function DetachPlot(axesObject)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = cwPlotter(varargin)</a>
0002 
0003 <span class="comment">% CWPLOTTER Open, analyse and plot power saturation experiments</span>
0004 <span class="comment">%      CWPLOTTER, is designed as a complete solution for viewing standard</span>
0005 <span class="comment">%      cwEPR experiments, quickly and simply.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%      CWPLOTTER, will load Bruker BE3ST files .DTA / .DSC / .YGF (when</span>
0008 <span class="comment">%       accessory files (.DSC/.YGF) are in the same folder) and should have functionality</span>
0009 <span class="comment">%       for older .spc / .par files (untested)</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% Syntax:  cwPlotter</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% Inputs:</span>
0014 <span class="comment">%    input1     - n/a</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% Outputs:</span>
0017 <span class="comment">%    output1    - n/a</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% Example:</span>
0020 <span class="comment">%    see http://morganbye.net/cwPlotter</span>
0021 <span class="comment">%</span>
0022 <span class="comment">% Other m-files required:   BrukerRead</span>
0023 <span class="comment">%</span>
0024 <span class="comment">% Subfunctions:             none</span>
0025 <span class="comment">%</span>
0026 <span class="comment">% MAT-files required:       none</span>
0027 <span class="comment">%</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% See also: CWNORM CWPLOT CWZERO ELOADER PEAKFINDER</span>
0030 
0031 <span class="comment">%                                        _                             _</span>
0032 <span class="comment">%                                       | |                           | |</span>
0033 <span class="comment">%  _ __ ___   ___  _ __ __ _  __ _ _ __ | |__  _   _  ___   _ __   ___| |_</span>
0034 <span class="comment">% | '_ ` _ \ / _ \| '__/ _` |/ _` | '_ \| '_ \| | | |/ _ \ | '_ \ / _ \ __|</span>
0035 <span class="comment">% | | | | | | (_) | | | (_| | (_| | | | | |_) | |_| |  __/_| | | |  __/ |_</span>
0036 <span class="comment">% |_| |_| |_|\___/|_|  \__, |\__,_|_| |_|_.__/ \__, |\___(_)_| |_|\___|\__|</span>
0037 <span class="comment">%                       __/ |                   __/ |</span>
0038 <span class="comment">%                      |___/                   |___/</span>
0039 <span class="comment">%</span>
0040 <span class="comment">%</span>
0041 <span class="comment">% M. Bye v11.9</span>
0042 <span class="comment">%</span>
0043 <span class="comment">% Author:       Morgan Bye</span>
0044 <span class="comment">% Work address: Henry Wellcome Unit for Biological EPR</span>
0045 <span class="comment">%               University of East Anglia</span>
0046 <span class="comment">%               NORWICH, UK</span>
0047 <span class="comment">% Email:        morgan.bye@uea.ac.uk</span>
0048 <span class="comment">% Website:      http://www.morganbye.net/cwPlotter</span>
0049 <span class="comment">% Sept 2011;    Last revision: 06-September-2011</span>
0050 <span class="comment">%</span>
0051 <span class="comment">% Version history:</span>
0052 <span class="comment">% Sept 11       Mouse movement &quot;if&quot; statements rearranged to minimise CPU</span>
0053 <span class="comment">%               time. Calculation of whether pointer is inside axes is not</span>
0054 <span class="comment">%               done unless a file is already loaded and g value not</span>
0055 <span class="comment">%               calculated unless pointer is inside the axes.</span>
0056 
0057 <span class="comment">% Last Modified by GUIDE v2.5 18-Jul-2011 17:02:20</span>
0058 
0059 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0060 gui_Singleton = 0;
0061 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0062                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0063                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction cwPlotter_OpeningFcn(hObject, eventdata, handles, varargin)">cwPlotter_OpeningFcn</a>, <span class="keyword">...</span>
0064                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = cwPlotter_OutputFcn(hObject, eventdata, handles)">cwPlotter_OutputFcn</a>, <span class="keyword">...</span>
0065                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0066                    <span class="string">'gui_Callback'</span>,   []);
0067 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0068     gui_State.gui_Callback = str2func(varargin{1});
0069 <span class="keyword">end</span>
0070 
0071 <span class="keyword">if</span> nargout
0072     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0073 <span class="keyword">else</span>
0074     gui_mainfcn(gui_State, varargin{:});
0075 <span class="keyword">end</span>
0076 <span class="comment">% End initialization code - DO NOT EDIT</span>
0077 
0078 
0079 <span class="comment">% --- Executes just before cwplotter is made visible.</span>
0080 <a name="_sub1" href="#_subfunctions" class="code">function cwPlotter_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0081 <span class="comment">% This function has no statusbar args, see OutputFcn.</span>
0082 <span class="comment">% hObject    handle to figure</span>
0083 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0084 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0085 <span class="comment">% varargin   command line arguments to cwplotter (see VARARGIN)</span>
0086 
0087 <span class="comment">% Choose default command line statusbar for cwplotter</span>
0088 handles.statusbar = hObject;
0089 
0090 <span class="comment">% Update handles structure</span>
0091 <span class="comment">% set(hObject,'toolbar','figure');</span>
0092 set(handles.panel_multiplot,<span class="string">'SelectionChangeFcn'</span>,@<a href="#_sub4" class="code" title="subfunction panel_multiplot_SelectionChangeFcn(hObject, eventdata, handles)">panel_multiplot_SelectionChangeFcn</a>);
0093 
0094 axes(handles.plot);
0095 xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0096 ylabel(<span class="string">'Intensity'</span>);
0097 
0098 set(handles.slider_zAxis,<span class="string">'Value'</span>,1);
0099 set(handles.slider_zAxis,<span class="string">'Min'</span>,1);
0100 
0101 <span class="comment">% Set cursor tracing on</span>
0102 set(gcf,<span class="string">'WindowButtonMotionFcn'</span>,@<a href="#_sub3" class="code" title="subfunction mouseCursor_Callback(hObject, eventdata, handles)">mouseCursor_Callback</a>);
0103 
0104 guidata(hObject, handles);
0105 
0106 <span class="comment">% UIWAIT makes cwplotter wait for user response (see UIRESUME)</span>
0107 <span class="comment">% uiwait(handles.figure1);</span>
0108 
0109 
0110 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0111 <a name="_sub2" href="#_subfunctions" class="code">function varargout = cwPlotter_OutputFcn(hObject, eventdata, handles) </a>
0112 <span class="comment">% varargout  cell array for returning statusbar args (see VARARGOUT);</span>
0113 <span class="comment">% hObject    handle to figure</span>
0114 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0115 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0116 
0117 <span class="comment">% Get default command line statusbar from handles structure</span>
0118 <span class="comment">% varargout{1} = handles.statusbar;</span>
0119 
0120 
0121 <a name="_sub3" href="#_subfunctions" class="code">function mouseCursor_Callback(hObject, eventdata, handles)</a>
0122 
0123 <span class="comment">% Get handles (mouse callback by default doesnt have handles)</span>
0124 handles = guihandles;
0125 
0126 <span class="keyword">if</span> strcmp(get(handles.edit_freq,<span class="string">'String'</span>),<span class="string">'-'</span>) == 0
0127     
0128     <span class="comment">% Get current cursor location</span>
0129     newPoint = get(gca,<span class="string">'CurrentPoint'</span>);
0130     
0131     x = get(gca,<span class="string">'XLim'</span>);
0132     y = get(gca,<span class="string">'YLim'</span>);
0133     
0134     <span class="comment">% Is 'CurrentPoint' inside the axes</span>
0135     
0136     inAxes = (newPoint(1,1) &gt;= x(1)) &amp;&amp; <span class="keyword">...</span>
0137         (newPoint(1,2) &gt;= y(1)) &amp;&amp; <span class="keyword">...</span>
0138         (newPoint(1,1) &lt;= x(2)) &amp;&amp; <span class="keyword">...</span>
0139         (newPoint(1,2) &lt;= y(2));
0140     
0141     <span class="keyword">if</span> inAxes
0142         
0143         set(gcf,<span class="string">'Pointer'</span>,<span class="string">'crosshair'</span>);
0144         
0145         <span class="comment">% Update the boxes</span>
0146         set(handles.edit_coord_mag  ,<span class="string">'String'</span>,num2str(newPoint(1,1)));
0147         set(handles.edit_coord_inten,<span class="string">'String'</span>,num2str(newPoint(1,2)));
0148         
0149         
0150         <span class="comment">% If a file has been loaded and a frequency has been set then calculate</span>
0151         <span class="comment">% the g value using</span>
0152         
0153         <span class="comment">% g = Plank's constant X Frequency</span>
0154         <span class="comment">%     ----------------------------</span>
0155         <span class="comment">%      Bohr magneton X Mag Field</span>
0156         
0157         
0158         
0159         g = ((6.626068e-34 * (str2num(get(handles.edit_freq,<span class="string">'String'</span>)))) <span class="keyword">...</span>
0160             / (9.274009e-24 * newPoint(1,1))) *1e13;
0161         
0162         set(handles.edit_coord_g,<span class="string">'String'</span>,num2str(g));
0163         
0164         
0165     <span class="keyword">else</span>
0166         
0167         set(gcf,<span class="string">'Pointer'</span>,<span class="string">'arrow'</span>);
0168         
0169         <span class="comment">% Otherwise set boxes as blank</span>
0170         set(handles.edit_coord_mag  ,<span class="string">'String'</span>,<span class="string">'-'</span>);
0171         set(handles.edit_coord_inten,<span class="string">'String'</span>,<span class="string">'-'</span>);
0172         set(handles.edit_coord_g    ,<span class="string">'String'</span>,<span class="string">'-'</span>);
0173         
0174     <span class="keyword">end</span>
0175 <span class="keyword">end</span>
0176 
0177 guidata(hObject, handles);
0178 
0179 
0180 <span class="comment">% function mouseCrossHairs(hObject, eventdata, handles)</span>
0181 <span class="comment">% x = get(gca,'XLim');</span>
0182 <span class="comment">% y = get(gca,'YLim');</span>
0183 <span class="comment">%</span>
0184 <span class="comment">% cpoint_x = str2num(get(edit_coord_mag,'String'));</span>
0185 <span class="comment">%</span>
0186 <span class="comment">% x_range = x(2) - x(1);</span>
0187 <span class="comment">% y_range = y(2) - y(1);</span>
0188 <span class="comment">%</span>
0189 <span class="comment">% try</span>
0190 <span class="comment">%     delete(handles.xline);</span>
0191 <span class="comment">% catch</span>
0192 <span class="comment">% end</span>
0193 <span class="comment">%</span>
0194 <span class="comment">% handles.xline = line([x(1) cpoint_x-(x_range*0.05)],newPoint(1,2),'LineStyle','--','Color','blue');</span>
0195 
0196     
0197 
0198 
0199 
0200 
0201 <span class="comment">%          ===================================================</span>
0202 <span class="comment">%          ===================================================</span>
0203 <span class="comment">%                     Dataset Manipulation Panel</span>
0204 <span class="comment">%          ===================================================</span>
0205 <span class="comment">%          ===================================================</span>
0206 
0207 <span class="comment">% ===================================================</span>
0208 <span class="comment">% Radio Buttons</span>
0209 <span class="comment">% ===================================================</span>
0210 
0211 <span class="comment">% --- Get state of radio buttons in Plot Selection</span>
0212 <a name="_sub4" href="#_subfunctions" class="code">function panel_multiplot_SelectionChangeFcn(hObject, eventdata, handles)</a>
0213 
0214 handles = guidata(hObject);
0215 
0216 <span class="keyword">switch</span> get(eventdata.NewValue,<span class="string">'Tag'</span>) <span class="comment">% Get Tag of selected object.</span>
0217     <span class="keyword">case</span> <span class="string">'radio_ontop'</span>
0218         handles.multiplotbutton = <span class="string">'radio_ontop'</span>;
0219     <span class="keyword">case</span> <span class="string">'radio_single'</span>
0220         handles.multiplotbutton = <span class="string">'radio_single'</span>;
0221     <span class="keyword">case</span> <span class="string">'radio_staggered'</span>
0222         handles.multiplotbutton = <span class="string">'radio_staggered'</span>;
0223     <span class="keyword">otherwise</span>
0224         handles.multiplotbutton = <span class="string">'none'</span>;
0225 <span class="keyword">end</span>
0226 
0227 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0228 
0229 guidata(hObject, handles);
0230 
0231 
0232 <span class="comment">%          ===================================================</span>
0233 <span class="comment">%          ===================================================</span>
0234 <span class="comment">%                               Plot Panel</span>
0235 <span class="comment">%          ===================================================</span>
0236 <span class="comment">%          ===================================================</span>
0237 
0238 <span class="comment">% --- Executes on Clear Button</span>
0239 <a name="_sub5" href="#_subfunctions" class="code">function button_clear_Callback(hObject, eventdata, handles)</a>
0240 
0241 cla(gca);
0242 axis(handles.plot_main);
0243 xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0244 ylabel(<span class="string">'Intensity'</span>);
0245 guidata(hObject, handles);
0246 
0247 
0248 <span class="comment">% --- Executes on Slider movement.</span>
0249 <a name="_sub6" href="#_subfunctions" class="code">function [handles] = slider_zAxis_Callback(hObject, eventdata, handles)</a>
0250 
0251 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0252 
0253 
0254 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0255 <a name="_sub7" href="#_subfunctions" class="code">function slider_zAxis_CreateFcn(hObject, eventdata, handles)</a>
0256 
0257 <span class="keyword">if</span> isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0258     set(hObject,<span class="string">'BackgroundColor'</span>,[.9 .9 .9]);
0259 <span class="keyword">end</span>
0260 
0261 
0262 <span class="comment">% --- Executes on button press in reset_button.</span>
0263 <a name="_sub8" href="#_subfunctions" class="code">function reset_button_Callback(hObject, eventdata, handles)</a>
0264 
0265 closeGUI = handles.figure1;                     <span class="comment">% handles.figure1 is the GUI figure</span>
0266  
0267 guiPosition = get(handles.figure1,<span class="string">'Position'</span>);  <span class="comment">% get the position of the GUI</span>
0268 guiName = get(handles.figure1,<span class="string">'Name'</span>);          <span class="comment">% get the name of the GUI</span>
0269 eval(guiName)                                   <span class="comment">% call the GUI again</span>
0270  
0271 close(closeGUI);                                <span class="comment">% close the old GUI</span>
0272 set(gcf,<span class="string">'Position'</span>,guiPosition);                <span class="comment">% set the position for the new GUI</span>
0273 
0274 
0275 
0276 <a name="_sub9" href="#_subfunctions" class="code">function edit_mWpower_Callback(hObject, eventdata, handles)</a>
0277 
0278 
0279 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0280 <a name="_sub10" href="#_subfunctions" class="code">function edit_mWpower_CreateFcn(hObject, eventdata, handles)</a>
0281 
0282 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0283     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0284 <span class="keyword">end</span>
0285 
0286 
0287 
0288 <a name="_sub11" href="#_subfunctions" class="code">function plot_cwplotter(hObject, eventdata, handles,x,y)</a>
0289 
0290 <span class="keyword">try</span>
0291     <span class="keyword">global</span> x y info
0292     
0293 <span class="keyword">catch</span>
0294     errordlg(<span class="string">'On execution of plotting, no data could be found. Please trying loading your files again'</span>,<span class="string">'Error: No data found'</span>)
0295 <span class="keyword">end</span>
0296 
0297 
0298 [r,c] = size(y);
0299 
0300 <span class="comment">% Auto zero checkbox</span>
0301 <span class="comment">% ===================================================</span>
0302 
0303 <span class="keyword">switch</span> get(handles.checkbox_zero,<span class="string">'Value'</span>)
0304     <span class="keyword">case</span> 1
0305         <span class="keyword">for</span> k = 1:c
0306             m = mean(y(:,k));
0307             y0(:,k) = y(:,k) - (m);
0308         <span class="keyword">end</span>
0309         
0310     <span class="keyword">case</span> 0
0311         y0 = y;
0312 <span class="keyword">end</span>
0313 
0314 <span class="comment">% Normalize checkbox</span>
0315 <span class="comment">% ===================================================</span>
0316 
0317 <span class="keyword">switch</span> get(handles.checkbox_normalize,<span class="string">'Value'</span>)
0318     <span class="keyword">case</span> 1
0319         <span class="keyword">for</span> k = 1:c
0320             max_y0(:,k) = max(y0(:,k));
0321             min_y0(:,k) = min(y0(:,k));
0322             
0323             y1(:,k) = (( y0(:,k) - min_y0(:,k))/(max_y0(:,k) - min_y0(:,k)) - 0.5) *2;
0324         <span class="keyword">end</span>
0325         
0326     <span class="keyword">case</span> 0
0327         y1 = y0;
0328 <span class="keyword">end</span>
0329 
0330 <span class="comment">% Digital smooth checkbox</span>
0331 <span class="comment">% ===================================================</span>
0332 
0333 <span class="keyword">switch</span> get(handles.checkbox_Dsmooth,<span class="string">'Value'</span>)
0334     <span class="keyword">case</span> 1
0335         <span class="keyword">for</span> k = 1:c
0336             wndw = str2num(get(handles.edit_Dsmooth,<span class="string">'String'</span>));
0337             h = ones(1,wndw)/wndw;
0338             y2(:,k) = filter(h, 1, y1(:,k));
0339         <span class="keyword">end</span>
0340     
0341     <span class="keyword">case</span> 0
0342         y2 = y1;
0343 <span class="keyword">end</span>        
0344         
0345 <span class="comment">% FFT smooth checkbox</span>
0346 <span class="comment">% ===================================================</span>
0347 
0348 <span class="keyword">switch</span> get(handles.checkbox_FFTsmooth,<span class="string">'Value'</span>)
0349     <span class="keyword">case</span> 1
0350         <span class="keyword">for</span> k = 1:c
0351             points = str2num(get(handles.edit_FFTsmooth,<span class="string">'String'</span>));
0352             f(:,k) = fft(y2(:,k));
0353             <span class="keyword">try</span>
0354                 f(r/2+1-points:r/2+points,k) = zeros(2*points,1);
0355             <span class="keyword">catch</span>
0356                 errordlg(sprintf(<span class="string">'FFT value is too high to compute or not a positive interger.\n\nPlease try again.'</span>),<span class="string">'FFT Smooth'</span>)
0357             <span class="keyword">end</span>
0358             
0359             y3(:,k) = real(ifft(f(:,k)));
0360         <span class="keyword">end</span>
0361         
0362     <span class="keyword">case</span> 0
0363         y3 = y2;
0364 <span class="keyword">end</span>
0365 
0366     
0367 <span class="keyword">if</span> c == 1
0368     
0369     set(handles.radio_single,<span class="string">'Value'</span>,1);
0370     
0371     plot (x,y3);
0372     xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0373     ylabel(<span class="string">'Intensity'</span>);
0374     set(handles.edit_mWpower,<span class="string">'String'</span>,sprintf(<span class="string">'%2.2f'</span>,info.MWPW));
0375     
0376     <span class="comment">% Set axis range.</span>
0377     <span class="keyword">switch</span> get(handles.checkbox_range,<span class="string">'Value'</span>)
0378         <span class="keyword">case</span> 1          <span class="comment">% If manual range selected then plot</span>
0379             <span class="keyword">try</span>
0380                 axis([str2num(get(handles.edit_maglow,<span class="string">'String'</span>)) str2num(get(handles.edit_maghigh,<span class="string">'String'</span>)) str2num(get(handles.edit_intenlow,<span class="string">'String'</span>)) str2num(get(handles.edit_intenhigh,<span class="string">'String'</span>))]);
0381             <span class="keyword">catch</span> err
0382                 warndlg(<span class="string">'You''re trying to manually select a range, but an error occured. Check all boxes are completed with numbers'</span>,<span class="string">'Error: Manual Axis Range'</span>)
0383             <span class="keyword">end</span>
0384             
0385             
0386         <span class="keyword">case</span> 0          <span class="comment">% If auto range, then update display</span>
0387             xlimits = xlim;
0388             ylimits = ylim;
0389             
0390             set(handles.edit_maglow   ,<span class="string">'String'</span>,xlimits(1));
0391             set(handles.edit_maghigh  ,<span class="string">'String'</span>,xlimits(2));
0392             set(handles.edit_intenlow ,<span class="string">'String'</span>,ylimits(1));
0393             set(handles.edit_intenhigh,<span class="string">'String'</span>,ylimits(2));
0394             
0395     <span class="keyword">end</span>
0396     
0397 <span class="keyword">else</span>
0398     
0399     <span class="keyword">if</span> get(handles.radio_ontop,<span class="string">'Value'</span>) == 1
0400         handles.multiplotbutton = <span class="string">'radio_ontop'</span>;
0401     <span class="keyword">elseif</span>  get(handles.radio_single,<span class="string">'Value'</span>) == 1
0402         handles.multiplotbutton = <span class="string">'radio_single'</span>;
0403     <span class="keyword">elseif</span> get(handles.radio_staggered,<span class="string">'Value'</span>) == 1
0404         handles.multiplotbutton = <span class="string">'radio_staggered'</span>;
0405     <span class="keyword">else</span>
0406         handles.multiplotbutton = <span class="string">'none'</span>;
0407     <span class="keyword">end</span>
0408     
0409     
0410     <span class="keyword">switch</span> handles.multiplotbutton
0411         <span class="keyword">case</span> <span class="string">'radio_ontop'</span>
0412             
0413             set(handles.slider_zAxis,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0414             
0415             plot(x,y3);
0416             
0417             xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0418             ylabel(<span class="string">'Intensity'</span>);
0419 
0420             set(handles.edit_mWpower,<span class="string">'String'</span>,<span class="string">'All'</span>);
0421             
0422             <span class="comment">% Set axis range.</span>
0423             <span class="keyword">switch</span> get(handles.checkbox_range,<span class="string">'Value'</span>)
0424                 <span class="keyword">case</span> 1          <span class="comment">% If manual range selected then plot</span>
0425                     <span class="keyword">try</span>
0426                         axis([str2num(get(handles.edit_maglow,<span class="string">'String'</span>)) str2num(get(handles.edit_maghigh,<span class="string">'String'</span>)) str2num(get(handles.edit_intenlow,<span class="string">'String'</span>)) str2num(get(handles.edit_intenhigh,<span class="string">'String'</span>))]);
0427                     <span class="keyword">catch</span> err
0428                         warndlg(<span class="string">'You''re trying to manually select a range, but an error occured. Check all boxes are completed with numbers'</span>,<span class="string">'Error: Manual Axis Range'</span>)
0429                     <span class="keyword">end</span>
0430                     
0431                     
0432                 <span class="keyword">case</span> 0          <span class="comment">% If auto range, then update display</span>
0433                     xlimits = xlim;
0434                     ylimits = ylim;
0435                     
0436                     set(handles.edit_maglow   ,<span class="string">'String'</span>,xlimits(1));
0437                     set(handles.edit_maghigh  ,<span class="string">'String'</span>,xlimits(2));
0438                     set(handles.edit_intenlow ,<span class="string">'String'</span>,ylimits(1));
0439                     set(handles.edit_intenhigh,<span class="string">'String'</span>,ylimits(2));
0440                     
0441             <span class="keyword">end</span>            
0442             
0443             
0444     
0445         <span class="keyword">case</span> <span class="string">'radio_single'</span>
0446             
0447             <span class="comment">% set slider max to number of files, then get slider position</span>
0448             set(handles.slider_zAxis,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
0449 
0450             set(handles.slider_zAxis,<span class="string">'Max'</span>,c);
0451             position = round(get(handles.slider_zAxis,<span class="string">'Value'</span>));
0452             
0453             plot(x,y3(:,position));
0454             
0455             xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0456             ylabel(<span class="string">'Intensity'</span>);
0457             
0458             <span class="comment">% Set axis range.</span>
0459             <span class="keyword">switch</span> get(handles.checkbox_range,<span class="string">'Value'</span>)
0460                 <span class="keyword">case</span> 1          <span class="comment">% If manual range selected then plot</span>
0461                     <span class="keyword">try</span>
0462                         axis([str2num(get(handles.edit_maglow,<span class="string">'String'</span>)) str2num(get(handles.edit_maghigh,<span class="string">'String'</span>)) str2num(get(handles.edit_intenlow,<span class="string">'String'</span>)) str2num(get(handles.edit_intenhigh,<span class="string">'String'</span>))]);
0463                     <span class="keyword">catch</span> err
0464                         warndlg(<span class="string">'You''re trying to manually select a range, but an error occured. Check all boxes are completed with numbers'</span>,<span class="string">'Error: Manual Axis Range'</span>)
0465                     <span class="keyword">end</span>
0466                     
0467                     
0468                 <span class="keyword">case</span> 0          <span class="comment">% If auto range, then update display</span>
0469                     xlimits = xlim;
0470                     ylimits = ylim;
0471                     
0472                     set(handles.edit_maglow   ,<span class="string">'String'</span>,xlimits(1));
0473                     set(handles.edit_maghigh  ,<span class="string">'String'</span>,xlimits(2));
0474                     set(handles.edit_intenlow ,<span class="string">'String'</span>,ylimits(1));
0475                     set(handles.edit_intenhigh,<span class="string">'String'</span>,ylimits(2));
0476                     
0477             <span class="keyword">end</span>
0478             
0479             <span class="comment">% many files = many x, 1 3D file = 1 x. Update mW power from</span>
0480             <span class="comment">% info file. Need x to see the format of info field.</span>
0481             [~,cx] = size(x);
0482             
0483             <span class="comment">% For seperate files</span>
0484             <span class="keyword">if</span> cx ~= 1
0485                 <span class="comment">% z_axis = flipud(handles.info.MWPW);</span>
0486                 set(handles.edit_mWpower,<span class="string">'String'</span>,sprintf(<span class="string">'%2.2f'</span>,info(position).MWPW));
0487                 set(handles.edit_freq,<span class="string">'String'</span>,info(position).MWFQ/1e+09);
0488                 set(handles.edit_numofscans,<span class="string">'String'</span>,mat2str(info(position).NbScansDone));
0489 
0490             <span class="comment">% For single file with *.YGF</span>
0491             <span class="keyword">else</span>
0492                 set(handles.edit_mWpower,<span class="string">'String'</span>,sprintf(<span class="string">'%2.4f'</span>,(info.MWPW)));
0493                 set(handles.edit_freq,<span class="string">'String'</span>,info.MWFQ/1e+09);
0494                 set(handles.edit_numofscans,<span class="string">'String'</span>,mat2str(info.NbScansDone));
0495                 
0496             <span class="keyword">end</span>
0497             
0498             
0499         <span class="keyword">case</span> <span class="string">'radio_staggered'</span>
0500             
0501             set(handles.slider_zAxis,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0502 
0503             
0504             <span class="keyword">if</span> get(handles.checkbox_yoffset,<span class="string">'Value'</span>) == 1
0505                 y_offset = str2num(get(handles.edit_yoffset,<span class="string">'String'</span>));
0506             <span class="keyword">else</span>
0507                 y_offset = 0;
0508             <span class="keyword">end</span>
0509             
0510             <span class="keyword">if</span> get(handles.checkbox_xoffset,<span class="string">'Value'</span>) == 1
0511                 x_offset = str2num(get(handles.edit_xoffset,<span class="string">'String'</span>));
0512             <span class="keyword">else</span>
0513                 x_offset = 0;
0514             <span class="keyword">end</span>
0515             
0516             cla(gca)
0517             set(gca,<span class="string">'NextPlot'</span>,<span class="string">'replace'</span>)
0518 
0519             xlabel(<span class="string">'Magnetic Field / Gauss'</span>);
0520             ylabel(<span class="string">'Intensity'</span>);
0521 
0522             hold on
0523             
0524             [~,cx] = size(x);
0525             
0526             <span class="comment">% For separate files</span>
0527             <span class="keyword">if</span> cx ~= 1
0528                 
0529                 <span class="keyword">for</span> k = 1:c
0530                 plot((x(:,k)+(k*x_offset)),(y3(:,k)+(y_offset*k)))
0531                 <span class="keyword">end</span>
0532                 
0533                 set(handles.edit_mWpower,<span class="string">'String'</span>,<span class="string">'All'</span>); 
0534             <span class="comment">% For single file with *.YGF</span>
0535             <span class="keyword">else</span>
0536                 <span class="keyword">for</span> k = 1:c
0537                 plot((x(:,1)+(k*x_offset)),(y3(:,k)+(y_offset*k)))
0538             <span class="keyword">end</span>
0539                 
0540                 set(handles.edit_mWpower,<span class="string">'String'</span>,<span class="string">'All'</span>);
0541                 
0542             <span class="keyword">end</span>
0543         
0544             hold off
0545             
0546             <span class="comment">% Set axis range.</span>
0547             <span class="keyword">switch</span> get(handles.checkbox_range,<span class="string">'Value'</span>)
0548                 <span class="keyword">case</span> 1          <span class="comment">% If manual range selected then plot</span>
0549                     <span class="keyword">try</span>
0550                         axis([str2num(get(handles.edit_maglow,<span class="string">'String'</span>)) str2num(get(handles.edit_maghigh,<span class="string">'String'</span>)) str2num(get(handles.edit_intenlow,<span class="string">'String'</span>)) str2num(get(handles.edit_intenhigh,<span class="string">'String'</span>))]);
0551                     <span class="keyword">catch</span> err
0552                         warndlg(<span class="string">'You''re trying to manually select a range, but an error occured. Check all boxes are completed with numbers'</span>,<span class="string">'Error: Manual Axis Range'</span>)
0553                     <span class="keyword">end</span>
0554                     
0555                     
0556                 <span class="keyword">case</span> 0          <span class="comment">% If auto range, then update display</span>
0557                     xlimits = xlim;
0558                     ylimits = ylim;
0559                     
0560                     set(handles.edit_maglow   ,<span class="string">'String'</span>,xlimits(1));
0561                     set(handles.edit_maghigh  ,<span class="string">'String'</span>,xlimits(2));
0562                     set(handles.edit_intenlow ,<span class="string">'String'</span>,ylimits(1));
0563                     set(handles.edit_intenhigh,<span class="string">'String'</span>,ylimits(2));
0564                     
0565             <span class="keyword">end</span>            
0566 
0567             
0568         <span class="keyword">otherwise</span>
0569             warndlg(<span class="string">'No data could be found to be plotted'</span>)
0570     <span class="keyword">end</span>
0571 <span class="keyword">end</span>
0572 
0573 <span class="comment">% Set plot so that when it redraws it will replace the former plot</span>
0574 set(gca,<span class="string">'NextPlot'</span>,<span class="string">'replace'</span>)
0575 
0576 <span class="comment">% Peak finding (perhaps to be introduced in later editions)</span>
0577 
0578 <span class="comment">% p2p height</span>
0579 <span class="comment">% y_mean = mean(y,2);</span>
0580 <span class="comment">% peaklist = fpeak(x(:,1),y_mean,5,[-inf,inf,-inf,inf]);</span>
0581 <span class="comment">% [~,maxpeak] = max(peaklist);</span>
0582 <span class="comment">% [~,minpeak] = min(peaklist);</span>
0583 
0584 <span class="comment">% maxpeak = peaklist(maxpeak(2),1);</span>
0585 <span class="comment">% minpeak = peaklist(minpeak(2),1);</span>
0586 
0587 <span class="comment">% peaklist = flipud(sortrows(peaklist,2));</span>
0588 <span class="comment">%</span>
0589 <span class="comment">% bigpeaks = peaklist(1:3,:);</span>
0590 <span class="comment">%</span>
0591 <span class="comment">% handles.g_x = maxpeak(1,1);</span>
0592 <span class="comment">% handles.g_y = maxpeak(2,1);</span>
0593 <span class="comment">% handles.g_z = maxpeak(3,1);</span>
0594 <span class="comment">%</span>
0595 <span class="comment">% ylimits = ylim;</span>
0596 <span class="comment">% line([maxpeak(1,1) maxpeak(1,1)],[ylimits(1,1) ylimits(1,2)],'LineStyle','--','Color','red');</span>
0597 <span class="comment">% line([maxpeak(2,1) maxpeak(2,1)],[ylimits(1,1) ylimits(1,2)],'LineStyle','--','Color','blue');</span>
0598 <span class="comment">% line([maxpeak(3,1) maxpeak(3,1)],[ylimits(1,1) ylimits(1,2)],'LineStyle','--','Color','green');</span>
0599 
0600 
0601 
0602 <span class="comment">%          ===================================================</span>
0603 <span class="comment">%          ===================================================</span>
0604 <span class="comment">%                       Toolbars and Menus</span>
0605 <span class="comment">%          ===================================================</span>
0606 <span class="comment">%          ===================================================</span>
0607 
0608 <span class="comment">% ===================================================</span>
0609 <span class="comment">% File Menu</span>
0610 <span class="comment">% ===================================================</span>
0611 
0612 <span class="comment">% --------------------------------------------------------------------</span>
0613 <a name="_sub12" href="#_subfunctions" class="code">function menu_openfile_Callback(hObject, eventdata, handles)</a>
0614 
0615 clear <span class="keyword">global</span> x y info
0616 
0617 [x,y,info] = <a href="../../misc/BrukerRead.html" class="code" title="function varargout = BrukerRead(varargin)">BrukerRead</a>;
0618 
0619 <span class="comment">% set handles for data</span>
0620 warning off
0621 <span class="keyword">global</span> x
0622 <span class="keyword">global</span> y
0623 <span class="keyword">global</span> info
0624 warning on
0625 
0626 set(handles.edit_filename,<span class="string">'String'</span>,info.TITL);
0627 set(handles.edit_freq,<span class="string">'String'</span>,info.MWFQ/1e+09);
0628 set(handles.edit_numofscans,<span class="string">'String'</span>,mat2str(info.NbScansDone));
0629 
0630 [~,c] = size(y);
0631 
0632 <span class="keyword">if</span> c ~= 1
0633     set(handles.slider_zAxis,<span class="string">'Max'</span>,c);
0634     set(handles.slider_zAxis,<span class="string">'SliderStep'</span>,[1/c 3*(1/c)]);
0635     set(handles.radio_ontop,<span class="string">'Value'</span>,1);
0636 <span class="keyword">else</span>
0637     set(handles.slider_zAxis,<span class="string">'Max'</span>,2);
0638     set(handles.radio_single,<span class="string">'Value'</span>,1);
0639 <span class="keyword">end</span>
0640 
0641 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles,x,y)
0642 
0643 guidata(hObject, handles);
0644 
0645 
0646 
0647 
0648 <span class="comment">% --------------------------------------------------------------------</span>
0649 <a name="_sub13" href="#_subfunctions" class="code">function menu_openfolder_Callback(hObject, eventdata, handles)</a>
0650 
0651 clear <span class="keyword">global</span> x y info
0652 
0653 <span class="comment">% Find all the spectra</span>
0654 folder = uigetdir;
0655 dtaFiles = dir([folder,<span class="string">'/*.DTA'</span>]);
0656 
0657 set(handles.edit_filename,<span class="string">'String'</span>,folder);
0658 
0659 <span class="comment">% Puts all x data into a x array (each column next experiment, ie 1024x16)</span>
0660 progress = waitbar(0,<span class="string">'Please wait while files are loaded'</span>);
0661 set(gcf,<span class="string">'Pointer'</span>,<span class="string">'watch'</span>);
0662 
0663 
0664 <span class="keyword">for</span> k=1:numel(dtaFiles)
0665     waitbar(k / numel(dtaFiles),progress,sprintf(<span class="string">'Loading file %d of %d'</span>,k,numel(dtaFiles)));
0666     
0667     file = [folder,<span class="string">'/'</span>,(dtaFiles(k).name)];
0668     [x_,y_,z_] = <a href="../../misc/BrukerRead.html" class="code" title="function varargout = BrukerRead(varargin)">BrukerRead</a>(file);
0669     x(:,k) = x_(:);
0670     y(:,k) = y_(:);
0671     info(k) = z_(:);
0672     
0673 <span class="keyword">end</span>
0674 
0675 delete(progress)
0676 set(gcf,<span class="string">'Pointer'</span>,<span class="string">'arrow'</span>);
0677 
0678 
0679 <span class="comment">% set handles for data</span>
0680 warning off
0681 <span class="keyword">global</span> x
0682 <span class="keyword">global</span> y
0683 <span class="keyword">global</span> info
0684 warning on
0685 
0686 [~,c] = size(y);
0687 
0688 <span class="keyword">if</span> c ~= 1
0689     set(handles.slider_zAxis,<span class="string">'Max'</span>,c);
0690     set(handles.slider_zAxis,<span class="string">'SliderStep'</span>,[1/c 3*(1/c)]);
0691     set(handles.radio_ontop,<span class="string">'Value'</span>,1);
0692 <span class="keyword">else</span>
0693     set(handles.slider_zAxis,<span class="string">'Max'</span>,2);
0694     set(handles.radio_single,<span class="string">'Value'</span>,1);
0695 <span class="keyword">end</span>
0696 
0697 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles);
0698 
0699 guidata(hObject, handles);
0700 
0701 
0702 
0703 
0704 <span class="comment">% --------------------------------------------------------------------</span>
0705 <a name="_sub14" href="#_subfunctions" class="code">function menu_savefigure_Callback(hObject, eventdata, handles)</a>
0706 <span class="comment">% hObject    handle to menu_savefigure (see GCBO)</span>
0707 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0708 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0709 
0710 <span class="comment">% stores savepath for the phase plot</span>
0711 [filename, pathname] = uiputfile({ <span class="string">'*.eps'</span>,<span class="string">'Encapsulated Postscript (*.eps)'</span>;<span class="keyword">...</span>
0712         <span class="string">'*.png'</span>,<span class="string">'Portable Network Graphic (*.png)'</span>;<span class="keyword">...</span>
0713         <span class="string">'*.bmp'</span>,<span class="string">'Bitmap (*.bmp)'</span>; <span class="string">'*.fig'</span>,<span class="string">'Figure (*.fig)'</span>}, <span class="keyword">...</span><span class="comment"> </span>
0714         <span class="string">'Save picture as'</span>,<span class="string">'default'</span>);
0715 
0716 <span class="comment">% if user cancels save command, nothing happens</span>
0717 <span class="keyword">if</span> isequal(filename,0) || isequal(pathname,0)
0718     <span class="keyword">return</span>
0719 <span class="keyword">end</span>
0720 <span class="comment">% create a new figure</span>
0721 newFig = figure;
0722 
0723 <span class="comment">% get the units and position of the axes object</span>
0724 axes_units = get(axesObject,<span class="string">'Units'</span>);
0725 axes_pos = get(axesObject,<span class="string">'Position'</span>);
0726 
0727 <span class="comment">% copies axesObject onto new figure</span>
0728 axesObject2 = copyobj(axesObject,newFig);
0729 
0730 <span class="comment">% realign the axes object on the new figure</span>
0731 set(axesObject2,<span class="string">'Units'</span>,axes_units);
0732 set(axesObject2,<span class="string">'Position'</span>,[15 5 axes_pos(3) axes_pos(4)]);
0733 
0734 <span class="comment">% adjusts the new figure accordingly</span>
0735 set(newFig,<span class="string">'Units'</span>,axes_units);
0736 set(newFig,<span class="string">'Position'</span>,[15 5 axes_pos(3)+30 axes_pos(4)+10]);
0737 
0738 <span class="comment">% saves the plot</span>
0739 saveas(newFig,[pathname filename]) 
0740 
0741 <span class="comment">% closes the figure</span>
0742 close(newFig)
0743 
0744 <span class="comment">% --------------------------------------------------------------------</span>
0745 <a name="_sub15" href="#_subfunctions" class="code">function menu_exit_Callback(hObject, eventdata, handles)</a>
0746 
0747 close(gcf);
0748 
0749 
0750 
0751 <span class="comment">% ===================================================</span>
0752 <span class="comment">% Figure Menu</span>
0753 <span class="comment">% ===================================================</span>
0754 
0755 <span class="comment">% --------------------------------------------------------------------</span>
0756 <a name="_sub16" href="#_subfunctions" class="code">function menuFile_Callback(hObject, eventdata, handles)</a>
0757 <span class="comment">% hObject    handle to menuFile (see GCBO)</span>
0758 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0759 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0760 
0761 
0762 <span class="comment">% --------------------------------------------------------------------</span>
0763 <a name="_sub17" href="#_subfunctions" class="code">function menu_figure_Callback(hObject, eventdata, handles)</a>
0764 <span class="comment">% hObject    handle to menu_figure (see GCBO)</span>
0765 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0766 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0767 
0768 
0769 <span class="comment">% --------------------------------------------------------------------</span>
0770 <a name="_sub18" href="#_subfunctions" class="code">function menu_detachfigure_Callback(hObject, eventdata, handles)</a>
0771 
0772 <a href="#_sub67" class="code" title="subfunction DetachPlot(axesObject)">DetachPlot</a>(handles.plot_main);
0773 
0774 
0775 <span class="comment">% --------------------------------------------------------------------</span>
0776 <a name="_sub19" href="#_subfunctions" class="code">function menu_clearfigure_Callback(hObject, eventdata, handles)</a>
0777 
0778 cla(gca);
0779 
0780 
0781 
0782 <span class="comment">% ===================================================</span>
0783 <span class="comment">% Toolbar</span>
0784 <span class="comment">% ===================================================</span>
0785 
0786 <span class="comment">% --------------------------------------------------------------------</span>
0787 <a name="_sub20" href="#_subfunctions" class="code">function ui_load1_ClickedCallback(hObject, eventdata, handles)</a>
0788 
0789 clear <span class="keyword">global</span> x y info
0790 
0791 [x,y,info] = <a href="../../misc/BrukerRead.html" class="code" title="function varargout = BrukerRead(varargin)">BrukerRead</a>;
0792 
0793 <span class="comment">% set handles for data</span>
0794 warning off
0795 <span class="keyword">global</span> x
0796 <span class="keyword">global</span> y
0797 <span class="keyword">global</span> info
0798 warning on
0799 
0800 set(handles.edit_filename,<span class="string">'String'</span>,info.TITL);
0801 set(handles.edit_freq,<span class="string">'String'</span>,info.MWFQ/1e+09);
0802 set(handles.edit_numofscans,<span class="string">'String'</span>,mat2str(info.NbScansDone));
0803 
0804 [~,c] = size(y);
0805 
0806 <span class="keyword">if</span> c ~= 1
0807     set(handles.slider_zAxis,<span class="string">'Max'</span>,c);
0808     set(handles.slider_zAxis,<span class="string">'SliderStep'</span>,[1/c 3*(1/c)]);
0809     set(handles.radio_ontop,<span class="string">'Value'</span>,1);
0810 <span class="keyword">else</span>
0811     set(handles.slider_zAxis,<span class="string">'Max'</span>,2);
0812     set(handles.radio_single,<span class="string">'Value'</span>,1);
0813 <span class="keyword">end</span>
0814 
0815 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0816 
0817 guidata(hObject, handles);
0818 
0819 
0820 <span class="comment">% --------------------------------------------------------------------</span>
0821 <a name="_sub21" href="#_subfunctions" class="code">function ui_loadmany_ClickedCallback(hObject, eventdata, handles)</a>
0822 
0823 clear <span class="keyword">global</span> x y info
0824 
0825 <span class="comment">% Find all the spectra</span>
0826 folder = uigetdir;
0827 dtaFiles = dir([folder,<span class="string">'/*.DTA'</span>]);
0828 
0829 set(handles.edit_filename,<span class="string">'String'</span>,folder);
0830 
0831 progress = waitbar(0,<span class="string">'Please wait while files are loaded'</span>);
0832 set(gcf,<span class="string">'Pointer'</span>,<span class="string">'watch'</span>);
0833 
0834 
0835 <span class="keyword">for</span> k=1:numel(dtaFiles)
0836     waitbar(k / numel(dtaFiles),progress,sprintf(<span class="string">'Loading file %d of %d'</span>,k,numel(dtaFiles)));
0837     
0838     file = [folder,<span class="string">'/'</span>,(dtaFiles(k).name)];
0839     [x_,y_,z_] = <a href="../../misc/BrukerRead.html" class="code" title="function varargout = BrukerRead(varargin)">BrukerRead</a>(file);
0840     x(:,k) = x_(:);
0841     y(:,k) = y_(:);
0842     info(k) = z_(:);
0843 <span class="keyword">end</span>
0844 
0845 delete(progress)
0846 set(gcf,<span class="string">'Pointer'</span>,<span class="string">'arrow'</span>);
0847 
0848 
0849 <span class="comment">% set handles for data</span>
0850 warning off
0851 <span class="keyword">global</span> x
0852 <span class="keyword">global</span> y
0853 <span class="keyword">global</span> info
0854 warning on
0855 
0856 [~,c] = size(y);
0857 
0858 <span class="keyword">if</span> c ~= 1
0859     set(handles.slider_zAxis,<span class="string">'Max'</span>,c);
0860     set(handles.slider_zAxis,<span class="string">'SliderStep'</span>,[1/c 3*(1/c)]);
0861     set(handles.radio_ontop,<span class="string">'Value'</span>,1);
0862 <span class="keyword">else</span>
0863     set(handles.slider_zAxis,<span class="string">'Max'</span>,2);
0864     set(handles.radio_single,<span class="string">'Value'</span>,1);
0865 <span class="keyword">end</span>
0866 
0867 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0868 
0869 guidata(hObject, handles);
0870 
0871 
0872 <span class="comment">% --------------------------------------------------------------------</span>
0873 <a name="_sub22" href="#_subfunctions" class="code">function ui_savefig_ClickedCallback(hObject, eventdata, handles)</a>
0874 
0875 <span class="comment">% stores savepath for the phase plot</span>
0876 [filename, pathname] = uiputfile({ <span class="string">'*.eps'</span>,<span class="string">'Encapsulated Postscript (*.eps)'</span>;<span class="keyword">...</span>
0877         <span class="string">'*.png'</span>,<span class="string">'Portable Network Graphic (*.png)'</span>;<span class="keyword">...</span>
0878         <span class="string">'*.bmp'</span>,<span class="string">'Bitmap (*.bmp)'</span>; <span class="string">'*.fig'</span>,<span class="string">'Figure (*.fig)'</span>}, <span class="keyword">...</span><span class="comment"> </span>
0879         <span class="string">'Save picture as'</span>,<span class="string">'default'</span>);
0880 
0881 <span class="comment">% if user cancels save command, nothing happens</span>
0882 <span class="keyword">if</span> isequal(filename,0) || isequal(pathname,0)
0883     <span class="keyword">return</span>
0884 <span class="keyword">end</span>
0885 <span class="comment">% create a new figure</span>
0886 newFig = figure;
0887 
0888 <span class="comment">% get the units and position of the axes object</span>
0889 axes_units = get(axesObject,<span class="string">'Units'</span>);
0890 axes_pos = get(axesObject,<span class="string">'Position'</span>);
0891 
0892 <span class="comment">% copies axesObject onto new figure</span>
0893 axesObject2 = copyobj(axesObject,newFig);
0894 
0895 <span class="comment">% realign the axes object on the new figure</span>
0896 set(axesObject2,<span class="string">'Units'</span>,axes_units);
0897 set(axesObject2,<span class="string">'Position'</span>,[15 5 axes_pos(3) axes_pos(4)]);
0898 
0899 <span class="comment">% adjusts the new figure accordingly</span>
0900 set(newFig,<span class="string">'Units'</span>,axes_units);
0901 set(newFig,<span class="string">'Position'</span>,[15 5 axes_pos(3)+30 axes_pos(4)+10]);
0902 
0903 <span class="comment">% saves the plot</span>
0904 saveas(newFig,[pathname filename]) 
0905 
0906 <span class="comment">% closes the figure</span>
0907 close(newFig)
0908 
0909 
0910 <span class="comment">%          ===================================================</span>
0911 <span class="comment">%          ===================================================</span>
0912 <span class="comment">%                       OPTIONS AND SETTINGS</span>
0913 <span class="comment">%          ===================================================</span>
0914 <span class="comment">%          ===================================================</span>
0915 
0916 <span class="comment">% ===================================================</span>
0917 <span class="comment">% Experimental info</span>
0918 <span class="comment">% ===================================================</span>
0919 
0920 <a name="_sub23" href="#_subfunctions" class="code">function edit_filename_Callback(hObject, eventdata, handles)</a>
0921 
0922 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0923 <a name="_sub24" href="#_subfunctions" class="code">function edit_filename_CreateFcn(hObject, eventdata, handles)</a>
0924 
0925 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0926     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0927 <span class="keyword">end</span>
0928 
0929 
0930 
0931 
0932 <a name="_sub25" href="#_subfunctions" class="code">function edit_freq_Callback(hObject, eventdata, handles)</a>
0933 
0934 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0935 <a name="_sub26" href="#_subfunctions" class="code">function edit_freq_CreateFcn(hObject, eventdata, handles)</a>
0936 
0937 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0938     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0939 <span class="keyword">end</span>
0940 
0941 
0942 
0943 
0944 <a name="_sub27" href="#_subfunctions" class="code">function edit_numofscans_Callback(hObject, eventdata, handles)</a>
0945 
0946 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0947 <a name="_sub28" href="#_subfunctions" class="code">function edit_numofscans_CreateFcn(hObject, eventdata, handles)</a>
0948 
0949 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0950     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0951 <span class="keyword">end</span>
0952 
0953 <span class="comment">% ===================================================</span>
0954 <span class="comment">% Data manipulation</span>
0955 <span class="comment">% ===================================================</span>
0956 
0957 <span class="comment">% Checkboxes</span>
0958 <span class="comment">% ===================================================</span>
0959 
0960 <span class="comment">% --- Executes on button press in checkbox_zero.</span>
0961 <a name="_sub29" href="#_subfunctions" class="code">function checkbox_zero_Callback(hObject, eventdata, handles)</a>
0962 
0963 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0964 
0965 <span class="comment">% --- Executes on button press in checkbox_normalize.</span>
0966 <a name="_sub30" href="#_subfunctions" class="code">function checkbox_normalize_Callback(hObject, eventdata, handles)</a>
0967 
0968 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0969 
0970 <span class="comment">% --- Executes on button press in checkbox_Dsmooth.</span>
0971 <a name="_sub31" href="#_subfunctions" class="code">function checkbox_Dsmooth_Callback(hObject, eventdata, handles)</a>
0972 
0973 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0974 
0975 <span class="comment">% --- Executes on button press in checkbox_FFTsmooth.</span>
0976 <a name="_sub32" href="#_subfunctions" class="code">function checkbox_FFTsmooth_Callback(hObject, eventdata, handles)</a>
0977 
0978 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0979 
0980 
0981 <span class="comment">% Edit boxes</span>
0982 <span class="comment">% ===================================================</span>
0983 
0984 <a name="_sub33" href="#_subfunctions" class="code">function edit_FFTsmooth_Callback(hObject, eventdata, handles)</a>
0985 
0986 set(handles.checkbox_FFTsmooth,<span class="string">'Value'</span>,1);
0987 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
0988 
0989 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0990 <a name="_sub34" href="#_subfunctions" class="code">function edit_FFTsmooth_CreateFcn(hObject, eventdata, handles)</a>
0991 
0992 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0993     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0994 <span class="keyword">end</span>
0995 
0996 
0997 
0998 <a name="_sub35" href="#_subfunctions" class="code">function edit_Dsmooth_Callback(hObject, eventdata, handles)</a>
0999 
1000 set(handles.checkbox_Dsmooth,<span class="string">'Value'</span>,1);
1001 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1002 
1003 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1004 <a name="_sub36" href="#_subfunctions" class="code">function edit_Dsmooth_CreateFcn(hObject, eventdata, handles)</a>
1005 
1006 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1007     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1008 <span class="keyword">end</span>
1009 
1010 <span class="comment">% ===================================================</span>
1011 <span class="comment">% Viewing options</span>
1012 <span class="comment">% ===================================================</span>
1013 
1014 <a name="_sub37" href="#_subfunctions" class="code">function edit_xoffset_Callback(hObject, eventdata, handles)</a>
1015 
1016 set(handles.checkbox_xoffset,<span class="string">'Value'</span>,1);
1017 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1018 
1019 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1020 <a name="_sub38" href="#_subfunctions" class="code">function edit_xoffset_CreateFcn(hObject, eventdata, handles)</a>
1021 
1022 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1023     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1024 <span class="keyword">end</span>
1025 
1026 
1027 
1028 
1029 <a name="_sub39" href="#_subfunctions" class="code">function edit_yoffset_Callback(hObject, eventdata, handles)</a>
1030 
1031 set(handles.checkbox_yoffset,<span class="string">'Value'</span>,1);
1032 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1033 
1034 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1035 <a name="_sub40" href="#_subfunctions" class="code">function edit_yoffset_CreateFcn(hObject, eventdata, handles)</a>
1036 
1037 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1038     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1039 <span class="keyword">end</span>
1040 
1041 
1042 
1043 
1044 <span class="comment">% --- Executes on button press in checkbox_yoffset.</span>
1045 <a name="_sub41" href="#_subfunctions" class="code">function checkbox_yoffset_Callback(hObject, eventdata, handles)</a>
1046 
1047 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1048 
1049 <span class="comment">% --- Executes on button press in checkbox_xoffset.</span>
1050 <a name="_sub42" href="#_subfunctions" class="code">function checkbox_xoffset_Callback(hObject, eventdata, handles)</a>
1051 
1052 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1053 
1054 
1055 
1056 <span class="comment">% Range options</span>
1057 <span class="comment">% ===================================================</span>
1058 
1059 <span class="comment">% --- Executes on button press in checkbox_range.</span>
1060 <a name="_sub43" href="#_subfunctions" class="code">function checkbox_range_Callback(hObject, eventdata, handles)</a>
1061 
1062 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1063 
1064 <a name="_sub44" href="#_subfunctions" class="code">function edit_maglow_Callback(hObject, eventdata, handles)</a>
1065 
1066 set(handles.checkbox_range,<span class="string">'Value'</span>,1);
1067 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1068 
1069 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1070 <a name="_sub45" href="#_subfunctions" class="code">function edit_maglow_CreateFcn(hObject, eventdata, handles)</a>
1071 
1072 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1073     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1074 <span class="keyword">end</span>
1075 
1076 
1077 
1078 <a name="_sub46" href="#_subfunctions" class="code">function edit_intenlow_Callback(hObject, eventdata, handles)</a>
1079 
1080 set(handles.checkbox_range,<span class="string">'Value'</span>,1);
1081 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1082 
1083 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1084 <a name="_sub47" href="#_subfunctions" class="code">function edit_intenlow_CreateFcn(hObject, eventdata, handles)</a>
1085 
1086 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1087     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1088 <span class="keyword">end</span>
1089 
1090 
1091 
1092 <a name="_sub48" href="#_subfunctions" class="code">function edit_maghigh_Callback(hObject, eventdata, handles)</a>
1093 
1094 set(handles.checkbox_range,<span class="string">'Value'</span>,1);
1095 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1096 
1097 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1098 <a name="_sub49" href="#_subfunctions" class="code">function edit_maghigh_CreateFcn(hObject, eventdata, handles)</a>
1099 
1100 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1101     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1102 <span class="keyword">end</span>
1103 
1104 
1105 
1106 <a name="_sub50" href="#_subfunctions" class="code">function edit_intenhigh_Callback(hObject, eventdata, handles)</a>
1107 
1108 set(handles.checkbox_range,<span class="string">'Value'</span>,1);
1109 <a href="#_sub11" class="code" title="subfunction plot_cwplotter(hObject, eventdata, handles,x,y)">plot_cwplotter</a>(hObject, eventdata, handles)
1110 
1111 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1112 <a name="_sub51" href="#_subfunctions" class="code">function edit_intenhigh_CreateFcn(hObject, eventdata, handles)</a>
1113 
1114 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1115     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1116 <span class="keyword">end</span>
1117 
1118 
1119 <span class="comment">% ===================================================</span>
1120 <span class="comment">% G Tensors</span>
1121 <span class="comment">% ===================================================</span>
1122 
1123 
1124 <a name="_sub52" href="#_subfunctions" class="code">function edit_g1_Callback(hObject, eventdata, handles)</a>
1125 
1126 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1127 <a name="_sub53" href="#_subfunctions" class="code">function edit_g1_CreateFcn(hObject, eventdata, handles)</a>
1128 
1129 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1130     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1131 <span class="keyword">end</span>
1132 
1133 
1134 
1135 
1136 <a name="_sub54" href="#_subfunctions" class="code">function edit_g2_Callback(hObject, eventdata, handles)</a>
1137 
1138 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1139 <a name="_sub55" href="#_subfunctions" class="code">function edit_g2_CreateFcn(hObject, eventdata, handles)</a>
1140 
1141 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1142     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1143 <span class="keyword">end</span>
1144 
1145 
1146 
1147 
1148 <a name="_sub56" href="#_subfunctions" class="code">function edit_g3_Callback(hObject, eventdata, handles)</a>
1149 
1150 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1151 <a name="_sub57" href="#_subfunctions" class="code">function edit_g3_CreateFcn(hObject, eventdata, handles)</a>
1152 
1153 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1154     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1155 <span class="keyword">end</span>
1156 
1157 
1158 
1159 
1160 <a name="_sub58" href="#_subfunctions" class="code">function edit_mag1_Callback(hObject, eventdata, handles)</a>
1161 
1162 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1163 <a name="_sub59" href="#_subfunctions" class="code">function edit_mag1_CreateFcn(hObject, eventdata, handles)</a>
1164 
1165 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1166     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1167 <span class="keyword">end</span>
1168 
1169 
1170 
1171 
1172 <a name="_sub60" href="#_subfunctions" class="code">function edit_coord_mag_Callback(hObject, eventdata, handles)</a>
1173 
1174 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1175 <a name="_sub61" href="#_subfunctions" class="code">function edit_coord_mag_CreateFcn(hObject, eventdata, handles)</a>
1176 
1177 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1178     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1179 <span class="keyword">end</span>
1180 
1181 
1182 
1183 
1184 <a name="_sub62" href="#_subfunctions" class="code">function edit_coord_g_Callback(hObject, eventdata, handles)</a>
1185 
1186 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1187 <a name="_sub63" href="#_subfunctions" class="code">function edit_coord_g_CreateFcn(hObject, eventdata, handles)</a>
1188 
1189 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1190     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1191 <span class="keyword">end</span>
1192 
1193 
1194 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1195 <a name="_sub64" href="#_subfunctions" class="code">function figure1_CreateFcn(hObject, eventdata, handles)</a>
1196 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
1197 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1198 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1199 
1200 
1201 
1202 <a name="_sub65" href="#_subfunctions" class="code">function edit_coord_inten_Callback(hObject, eventdata, handles)</a>
1203 <span class="comment">% hObject    handle to edit_coord_inten (see GCBO)</span>
1204 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1205 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1206 
1207 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_coord_inten as text</span>
1208 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_coord_inten as a double</span>
1209 
1210 
1211 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1212 <a name="_sub66" href="#_subfunctions" class="code">function edit_coord_inten_CreateFcn(hObject, eventdata, handles)</a>
1213 <span class="comment">% hObject    handle to edit_coord_inten (see GCBO)</span>
1214 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1215 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1216 
1217 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1218 <span class="comment">%       See ISPC and COMPUTER.</span>
1219 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1220     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1221 <span class="keyword">end</span>
1222 
1223 
1224 <a name="_sub67" href="#_subfunctions" class="code">function DetachPlot(axesObject)</a>
1225 
1226 <span class="comment">% Export a plot from within the GUI</span>
1227 
1228 <span class="comment">%                                        _                             _</span>
1229 <span class="comment">%                                       | |                           | |</span>
1230 <span class="comment">%  _ __ ___   ___  _ __ __ _  __ _ _ __ | |__  _   _  ___   _ __   ___| |_</span>
1231 <span class="comment">% | '_ ` _ \ / _ \| '__/ _` |/ _` | '_ \| '_ \| | | |/ _ \ | '_ \ / _ \ __|</span>
1232 <span class="comment">% | | | | | | (_) | | | (_| | (_| | | | | |_) | |_| |  __/_| | | |  __/ |_</span>
1233 <span class="comment">% |_| |_| |_|\___/|_|  \__, |\__,_|_| |_|_.__/ \__, |\___(_)_| |_|\___|\__|</span>
1234 <span class="comment">%                       __/ |                   __/ |</span>
1235 <span class="comment">%                      |___/                   |___/</span>
1236 <span class="comment">%</span>
1237 <span class="comment">%</span>
1238 <span class="comment">% M. Bye v11.9</span>
1239 
1240 <span class="comment">% create a new figure</span>
1241 newFig = figure;
1242 
1243 <span class="comment">% get the units and position of the axes object</span>
1244 axes_units = get(axesObject,<span class="string">'Units'</span>);
1245 axes_pos = get(axesObject,<span class="string">'Position'</span>);
1246 
1247 <span class="comment">% copies axesObject onto new figure</span>
1248 axesObject2 = copyobj(axesObject,newFig);
1249 
1250 <span class="comment">% realign the axes object on the new figure</span>
1251 set(axesObject2,<span class="string">'Units'</span>,axes_units);
1252 set(axesObject2,<span class="string">'Position'</span>,[15 5 axes_pos(3) axes_pos(4)]);
1253 
1254 <span class="comment">% adjusts the new figure accordingly</span>
1255 set(newFig,<span class="string">'Units'</span>,axes_units);
1256 set(newFig,<span class="string">'Position'</span>,[15 5 axes_pos(3)+30 axes_pos(4)+10]);</pre></div>
<hr><address>Generated on Sun 07-Sep-2014 15:05:40 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>