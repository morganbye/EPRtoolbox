<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of MMM_figureshaper</title>
  <meta name="keywords" content="MMM_figureshaper">
  <meta name="description" content="MMM_FIGURESHAPER take MMM distance distributions from the DEER window and">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">MMM_functions</a> &gt; MMM_figureshaper.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for MMM_functions&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>MMM_figureshaper
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>MMM_FIGURESHAPER take MMM distance distributions from the DEER window and</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function MMM_figureshaper(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> MMM_FIGURESHAPER take MMM distance distributions from the DEER window and
 manipulate them into something more usable.

 MMM_FIGURESHAPER ('file')
 MMM_FIGURESHAPER ('file','graphing_style')
 MMM_FIGURESHAPER ('file','graphing_style','graph_open')
 MMM_FIGURESHAPER ('file','graphing_style','graph_open','image_format') 

 MMM_FIGURESHAPER takes figures saved from the MMM DEER window and
 converts them into .csv files for manipulation as well as presenting the
 distance distribution in a figure.

 The figure can be disabled, drawn as a single or as a complete figure
 with axes and labels.

 The figure can be kept open or closed automatically in the script - can
 be useful if using in batch mode for a folder of many files

 The image format of the figure can be specified according to the user
 preference.

 Inputs:
    input1     - File or folder converter mode
                   'file' or 'folder'
    input2     - Graphing style
                   'minimal' or 'elegant'
    input3     - Leave open figures
                   'open' or 'close'
    input4     - Image format
                   '.png' , '.eps' , '.pdf' etc

 Outputs:
    output1    - a graphic file
                   by default &quot;figurename.fig.png&quot;
    output2    - a CSV file with x and y values in two columns
                   by default &quot;figurename.fig.csv&quot;

 Example:
   MMM_figureshaper('file','minimal','open')
       convert a single file and leave the minimal figure open

   MMM_figureshaper('file','elegant','open')
       convert a single file and leave the elegant figure open

   MMM_figureshaper('folder','minimal','open')
       convert a folder, using minimal figure options, leaving figures
       open

 Other m-files required:   none

 Subfunctions:             none

 MAT-files required:       none


 See also: EPRTOOLBOX MMM</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function MMM_figureshaper(varargin)</a>
0002 
0003 <span class="comment">% MMM_FIGURESHAPER take MMM distance distributions from the DEER window and</span>
0004 <span class="comment">% manipulate them into something more usable.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% MMM_FIGURESHAPER ('file')</span>
0007 <span class="comment">% MMM_FIGURESHAPER ('file','graphing_style')</span>
0008 <span class="comment">% MMM_FIGURESHAPER ('file','graphing_style','graph_open')</span>
0009 <span class="comment">% MMM_FIGURESHAPER ('file','graphing_style','graph_open','image_format')</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% MMM_FIGURESHAPER takes figures saved from the MMM DEER window and</span>
0012 <span class="comment">% converts them into .csv files for manipulation as well as presenting the</span>
0013 <span class="comment">% distance distribution in a figure.</span>
0014 <span class="comment">%</span>
0015 <span class="comment">% The figure can be disabled, drawn as a single or as a complete figure</span>
0016 <span class="comment">% with axes and labels.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% The figure can be kept open or closed automatically in the script - can</span>
0019 <span class="comment">% be useful if using in batch mode for a folder of many files</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% The image format of the figure can be specified according to the user</span>
0022 <span class="comment">% preference.</span>
0023 <span class="comment">%</span>
0024 <span class="comment">% Inputs:</span>
0025 <span class="comment">%    input1     - File or folder converter mode</span>
0026 <span class="comment">%                   'file' or 'folder'</span>
0027 <span class="comment">%    input2     - Graphing style</span>
0028 <span class="comment">%                   'minimal' or 'elegant'</span>
0029 <span class="comment">%    input3     - Leave open figures</span>
0030 <span class="comment">%                   'open' or 'close'</span>
0031 <span class="comment">%    input4     - Image format</span>
0032 <span class="comment">%                   '.png' , '.eps' , '.pdf' etc</span>
0033 <span class="comment">%</span>
0034 <span class="comment">% Outputs:</span>
0035 <span class="comment">%    output1    - a graphic file</span>
0036 <span class="comment">%                   by default &quot;figurename.fig.png&quot;</span>
0037 <span class="comment">%    output2    - a CSV file with x and y values in two columns</span>
0038 <span class="comment">%                   by default &quot;figurename.fig.csv&quot;</span>
0039 <span class="comment">%</span>
0040 <span class="comment">% Example:</span>
0041 <span class="comment">%   MMM_figureshaper('file','minimal','open')</span>
0042 <span class="comment">%       convert a single file and leave the minimal figure open</span>
0043 <span class="comment">%</span>
0044 <span class="comment">%   MMM_figureshaper('file','elegant','open')</span>
0045 <span class="comment">%       convert a single file and leave the elegant figure open</span>
0046 <span class="comment">%</span>
0047 <span class="comment">%   MMM_figureshaper('folder','minimal','open')</span>
0048 <span class="comment">%       convert a folder, using minimal figure options, leaving figures</span>
0049 <span class="comment">%       open</span>
0050 <span class="comment">%</span>
0051 <span class="comment">% Other m-files required:   none</span>
0052 <span class="comment">%</span>
0053 <span class="comment">% Subfunctions:             none</span>
0054 <span class="comment">%</span>
0055 <span class="comment">% MAT-files required:       none</span>
0056 <span class="comment">%</span>
0057 <span class="comment">%</span>
0058 <span class="comment">% See also: EPRTOOLBOX MMM</span>
0059 
0060 
0061 <span class="comment">%                                        _                             _</span>
0062 <span class="comment">%                                       | |                           | |</span>
0063 <span class="comment">%  _ __ ___   ___  _ __ __ _  __ _ _ __ | |__  _   _  ___   _ __   ___| |_</span>
0064 <span class="comment">% | '_ ` _ \ / _ \| '__/ _` |/ _` | '_ \| '_ \| | | |/ _ \ | '_ \ / _ \ __|</span>
0065 <span class="comment">% | | | | | | (_) | | | (_| | (_| | | | | |_) | |_| |  __/_| | | |  __/ |_</span>
0066 <span class="comment">% |_| |_| |_|\___/|_|  \__, |\__,_|_| |_|_.__/ \__, |\___(_)_| |_|\___|\__|</span>
0067 <span class="comment">%                       __/ |                   __/ |</span>
0068 <span class="comment">%                      |___/                   |___/</span>
0069 <span class="comment">%</span>
0070 <span class="comment">%</span>
0071 <span class="comment">% M. Bye v13.04</span>
0072 <span class="comment">%</span>
0073 <span class="comment">% Author:       Morgan Bye</span>
0074 <span class="comment">% Work address: Henry Wellcome Unit for Biological EPR</span>
0075 <span class="comment">%               University of East Anglia</span>
0076 <span class="comment">%               NORWICH, UK</span>
0077 <span class="comment">% Email:        morgan.bye@uea.ac.uk</span>
0078 <span class="comment">% Website:      http://www.morganbye.net/eprtoolbox/</span>
0079 <span class="comment">% Apr 2013;     Last revision: 03-April-2013</span>
0080 <span class="comment">%</span>
0081 <span class="comment">% Approximate coding time of file:</span>
0082 <span class="comment">%               6 hours</span>
0083 <span class="comment">%</span>
0084 <span class="comment">%</span>
0085 <span class="comment">% Version history:</span>
0086 <span class="comment">% Dec 11        Quick change</span>
0087 <span class="comment">%</span>
0088 <span class="comment">% Oct 11        &gt; Bulleted list that scans across</span>
0089 <span class="comment">%                   2 lines</span>
0090 <span class="comment">%               &gt; 2nd point</span>
0091 
0092 <span class="comment">% Open figure(s)</span>
0093 
0094 <span class="keyword">switch</span> nargin
0095     <span class="keyword">case</span> 0
0096         entry = <span class="string">'file'</span>;
0097         graph = <span class="string">'elegant'</span>;
0098         lopen = <span class="string">'yes'</span>;
0099         ext   = <span class="string">'.png'</span>;
0100     
0101     <span class="keyword">case</span> 1
0102         entry = varargin{1};
0103         graph = <span class="string">'elegant'</span>;
0104         lopen = <span class="string">'yes'</span>;
0105         ext   = <span class="string">'.png'</span>;
0106         
0107     <span class="keyword">case</span> 2
0108         entry = varargin{1};
0109         graph = varargin{2};
0110         lopen = <span class="string">'yes'</span>;
0111         ext   = <span class="string">'.png'</span>;
0112         
0113     <span class="keyword">case</span> 3
0114         entry = varargin{1};
0115         graph = varargin{2};
0116         lopen = varargin{3};
0117         ext   = <span class="string">'.png'</span>;
0118         
0119     <span class="keyword">case</span> 4
0120         entry = varargin{1};
0121         graph = varargin{2};
0122         lopen = varargin{3};
0123         ext   = varargin{4};
0124 
0125 <span class="keyword">end</span>
0126         
0127 <span class="comment">% File loading</span>
0128 
0129 <span class="keyword">switch</span> entry
0130     <span class="keyword">case</span> <span class="string">'file'</span>
0131         
0132         [file , directory] = uigetfile({<span class="string">'*.fig'</span>,<span class="string">'MMM Figure (*.fig)'</span>; <span class="keyword">...</span>
0133             <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>},<span class="keyword">...</span>
0134             <span class="string">'Load MMM figure'</span>);
0135         
0136         <span class="comment">% if user cancels command nothing happens</span>
0137         <span class="keyword">if</span> isequal(file,0) <span class="comment">%|| isequal(directory,0)</span>
0138             <span class="keyword">return</span>
0139         <span class="keyword">end</span>
0140         
0141         <span class="comment">% File name/path manipulation</span>
0142         address = [directory,file];
0143         [~, name,extension] = fileparts(address);
0144         
0145         figFiles(1).name = file;
0146         noFiles = 1;
0147         
0148     <span class="keyword">case</span> <span class="string">'folder'</span>
0149         
0150         directory = uigetdir(<span class="string">''</span>,<span class="string">'MMM_figureshaper: Select a folder to load'</span>);
0151         
0152         <span class="comment">% if user cancels command nothing happens</span>
0153         <span class="keyword">if</span> isequal(directory,0)
0154             <span class="keyword">return</span>
0155         <span class="keyword">end</span>
0156         
0157         figFiles = dir([directory <span class="string">'/*.fig'</span>]);
0158         noFiles  = numel(figFiles);
0159         
0160 <span class="keyword">end</span>
0161 
0162 <span class="comment">% File manipulation</span>
0163 
0164 <span class="keyword">for</span> k = 1:noFiles
0165    
0166     <span class="comment">% Open figure</span>
0167     open([directory <span class="string">'/'</span> figFiles(k).name]);
0168     
0169     <span class="comment">% Find lines on figure</span>
0170     lines = findall(get(gcf,<span class="string">'Children'</span>), <span class="string">'Type'</span>,<span class="string">'Line'</span>);
0171     
0172     <span class="comment">% Line 1: distance distribution</span>
0173     x(:,k) = get(lines(1),<span class="string">'XData'</span>)';
0174     y(:,k) = get(lines(1),<span class="string">'YData'</span>)';
0175     
0176     close(gcf);
0177     
0178     <span class="comment">% Switch for options</span>
0179     
0180     figure(<span class="string">'name'</span> , figFiles(k).name , <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>);
0181     
0182     axis tight
0183     set(gcf,<span class="string">'color'</span>, <span class="string">'white'</span>);
0184     xmin = 0.5;
0185     xmax = 5.5;
0186     ymin = -0.01;
0187            
0188     <span class="keyword">switch</span> graph
0189         
0190         <span class="keyword">case</span> <span class="string">'minimal'</span>
0191             plot(x(:,k),y(:,k),<span class="string">'LineWidth'</span>,5);
0192             axis([xmin xmax ymin max(y(:,k))]);
0193             axis off
0194             
0195             saveas(gcf, [directory <span class="string">'/'</span> figFiles(k).name ext]);
0196             
0197             <span class="keyword">if</span> strcmp(lopen,<span class="string">'close'</span>)
0198                 close(gcf)
0199             <span class="keyword">end</span>
0200             
0201             
0202         <span class="keyword">case</span> <span class="string">'elegant'</span>
0203             plot(x(:,k),y(:,k));
0204             axis([xmin xmax ymin max(y(:,k))]);
0205             xlabel(<span class="string">'Distance / nm'</span>);
0206             ylabel(<span class="string">'Probability'</span>);
0207             
0208             saveas(gcf, [directory <span class="string">'/'</span> figFiles(k).name ext]);
0209             
0210             <span class="keyword">if</span> strcmp(lopen,<span class="string">'close'</span>)
0211                 close(gcf)
0212             <span class="keyword">end</span>
0213 
0214         <span class="keyword">case</span> <span class="string">'none'</span>
0215             close(gcf);
0216             
0217     <span class="keyword">end</span>
0218     
0219     csvwrite([directory <span class="string">'/'</span> figFiles(k).name <span class="string">'.csv'</span>], [x(:,k) y(:,k)]);
0220     
0221 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sun 07-Jul-2013 12:41:22 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>